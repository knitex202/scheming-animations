{"version":3,"file":"SchemaProcessor.js","sources":["../../src/SchemaProcessor.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.processSchema = void 0;\nconst tslib_1 = require(\"tslib\");\nconst ModelField_1 = require(\"./ModelField\");\nconst Authorization_1 = require(\"./Authorization\");\nconst CustomOperation_1 = require(\"./CustomOperation\");\nconst util_1 = require(\"./util\");\nconst Handler_1 = require(\"./Handler\");\nconst os = tslib_1.__importStar(require(\"os\"));\nconst path = tslib_1.__importStar(require(\"path\"));\nfunction isInternalModel(model) {\n    if (model.data &&\n        !isCustomType(model) &&\n        !isCustomOperation(model)) {\n        return true;\n    }\n    return false;\n}\nfunction isEnumType(data) {\n    if (data?.type === 'enum') {\n        return true;\n    }\n    return false;\n}\nfunction isCustomType(data) {\n    if (data?.data?.type === 'customType') {\n        return true;\n    }\n    return false;\n}\nfunction isCustomOperation(type) {\n    if (CustomOperation_1.CustomOperationNames.includes(type?.data?.typeName)) {\n        return true;\n    }\n    return false;\n}\nfunction isModelFieldDef(data) {\n    return data?.fieldType === 'model';\n}\nfunction isScalarFieldDef(data) {\n    return data?.fieldType !== 'model';\n}\nfunction isRefFieldDef(data) {\n    return data?.type === 'ref';\n}\nfunction isModelField(field) {\n    return isModelFieldDef(field?.data);\n}\nfunction dataSourceIsRef(dataSource) {\n    return (typeof dataSource !== 'string' &&\n        dataSource?.data &&\n        dataSource.data.type === 'ref');\n}\nfunction isScalarField(field) {\n    return isScalarFieldDef(field?.data);\n}\nfunction isRefField(field) {\n    return isRefFieldDef(field?.data);\n}\nfunction scalarFieldToGql(fieldDef, identifier, secondaryIndexes = []) {\n    const { fieldType, required, array, arrayRequired, default: _default, } = fieldDef;\n    let field = fieldType;\n    if (identifier !== undefined) {\n        field += '!';\n        if (identifier.length > 1) {\n            const [_pk, ...sk] = identifier;\n            field += ` @primaryKey(sortKeyFields: [${sk\n                .map((sk) => `\"${sk}\"`)\n                .join(', ')}])`;\n        }\n        else {\n            field += ' @primaryKey';\n        }\n        for (const index of secondaryIndexes) {\n            field += ` ${index}`;\n        }\n        return field;\n    }\n    if (required === true) {\n        field += '!';\n    }\n    if (array) {\n        field = `[${field}]`;\n        if (arrayRequired === true) {\n            field += '!';\n        }\n    }\n    if (_default !== undefined) {\n        field += ` @default(value: \"${_default?.toString()}\")`;\n    }\n    for (const index of secondaryIndexes) {\n        field += ` ${index}`;\n    }\n    return field;\n}\nfunction modelFieldToGql(fieldDef) {\n    const { type, relatedModel, array, valueRequired, arrayRequired, references, } = fieldDef;\n    let field = relatedModel;\n    if (valueRequired === true) {\n        field += '!';\n    }\n    if (array) {\n        field = `[${field}]`;\n    }\n    if (arrayRequired === true) {\n        field += '!';\n    }\n    if (references && Array.isArray(references) && references.length > 0) {\n        field += ` @${type}(references: [${references.map((s) => `\"${String(s)}\"`)}])`;\n    }\n    else {\n        field += ` @${type}`;\n    }\n    return field;\n}\nfunction refFieldToGql(fieldDef) {\n    const { link, valueRequired, array, arrayRequired } = fieldDef;\n    let field = link;\n    if (valueRequired === true) {\n        field += '!';\n    }\n    if (array === true) {\n        field = `[${field}]`;\n    }\n    if (arrayRequired === true) {\n        field += '!';\n    }\n    return field;\n}\nfunction transformFunctionHandler(handlers, functionFieldName) {\n    let gqlHandlerContent = '';\n    const lambdaFunctionDefinition = {};\n    handlers.forEach((handler, idx) => {\n        const handlerData = (0, Handler_1.getHandlerData)(handler);\n        if (typeof handlerData === 'string') {\n            gqlHandlerContent += `@function(name: \"${handlerData}\") `;\n        }\n        else if (typeof handlerData.getInstance === 'function') {\n            const fnName = `Fn${capitalize(functionFieldName)}${idx === 0 ? '' : `${idx + 1}`}`;\n            lambdaFunctionDefinition[fnName] = handlerData;\n            gqlHandlerContent += `@function(name: \"${fnName}\") `;\n        }\n        else {\n            throw new Error(`Invalid value specified for ${functionFieldName} handler.function(). Expected: defineFunction or string.`);\n        }\n    });\n    return { gqlHandlerContent, lambdaFunctionDefinition };\n}\nfunction customOperationToGql(typeName, typeDef, authorization, isCustom = false, databaseType, getRefType) {\n    const { arguments: fieldArgs, typeName: opType, returnType, functionRef, handlers, subscriptionSource, } = typeDef.data;\n    let callSignature = typeName;\n    const implicitModels = [];\n    const { authString } = isCustom\n        ? calculateCustomAuth(authorization)\n        : calculateAuth(authorization);\n    /**\n     *\n     * @param returnType The return type from the `data` field of a customer operation.\n     * @param refererTypeName The type the refers {@link returnType} by `a.ref()`.\n     * @param shouldAddCustomTypeToImplicitModels A flag indicates wether it should push\n     * the return type resolved CustomType to the `implicitModels` list.\n     * @returns\n     */\n    const resolveReturnTypeNameFromReturnType = (returnType, { refererTypeName, shouldAddCustomTypeToImplicitModels = true, }) => {\n        if (isRefField(returnType)) {\n            return refFieldToGql(returnType?.data);\n        }\n        else if (isCustomType(returnType)) {\n            const returnTypeName = `${capitalize(refererTypeName)}ReturnType`;\n            if (shouldAddCustomTypeToImplicitModels) {\n                implicitModels.push([returnTypeName, returnType]);\n            }\n            return returnTypeName;\n        }\n        else if (isScalarField(returnType)) {\n            return scalarFieldToGql(returnType?.data);\n        }\n        else {\n            throw new Error(`Unrecognized return type on ${typeName}`);\n        }\n    };\n    let returnTypeName;\n    if (opType === 'Subscription' && returnType === null) {\n        // up to this point, we've validated that each subscription resource resolves\n        // the same return type, so it's safe to use subscriptionSource[0] here.\n        const { type, def } = getRefType(subscriptionSource[0].data.link, typeName);\n        if (type === 'CustomOperation') {\n            returnTypeName = resolveReturnTypeNameFromReturnType(def.data.returnType, {\n                refererTypeName: subscriptionSource[0].data.link,\n                shouldAddCustomTypeToImplicitModels: false,\n            });\n        }\n        else {\n            returnTypeName = refFieldToGql(subscriptionSource[0].data);\n        }\n    }\n    else {\n        returnTypeName = resolveReturnTypeNameFromReturnType(returnType, {\n            refererTypeName: typeName,\n        });\n    }\n    if (Object.keys(fieldArgs).length > 0) {\n        const { gqlFields, models } = processFields(typeName, fieldArgs, {}, {});\n        callSignature += `(${gqlFields.join(', ')})`;\n        implicitModels.push(...models);\n    }\n    const handler = handlers && handlers[0];\n    const brand = handler && (0, util_1.getBrand)(handler);\n    let gqlHandlerContent = '';\n    let lambdaFunctionDefinition = {};\n    let customSqlDataSourceStrategy;\n    if (isFunctionHandler(handlers)) {\n        ({ gqlHandlerContent, lambdaFunctionDefinition } = transformFunctionHandler(handlers, typeName));\n    }\n    else if (functionRef) {\n        gqlHandlerContent = `@function(name: \"${functionRef}\") `;\n    }\n    else if (databaseType === 'sql' && handler && brand === 'inlineSql') {\n        gqlHandlerContent = `@sql(statement: ${escapeGraphQlString(String((0, Handler_1.getHandlerData)(handler)))}) `;\n        customSqlDataSourceStrategy = {\n            typeName: opType,\n            fieldName: typeName,\n        };\n    }\n    else if (isSqlReferenceHandler(handlers)) {\n        const handlerData = (0, Handler_1.getHandlerData)(handlers[0]);\n        const entry = resolveEntryPath(handlerData, 'Could not determine import path to construct absolute code path for sql reference handler. Consider using an absolute path instead.');\n        const reference = typeof entry === 'string' ? entry : entry.relativePath;\n        customSqlDataSourceStrategy = {\n            typeName: opType,\n            fieldName: typeName,\n            entry,\n        };\n        gqlHandlerContent = `@sql(reference: \"${reference}\") `;\n    }\n    if (opType === 'Subscription') {\n        const subscriptionSources = subscriptionSource\n            .flatMap((source) => {\n            const refTarget = source.data.link;\n            const { type } = getRefType(refTarget, typeName);\n            if (type === 'CustomOperation') {\n                return refTarget;\n            }\n            if (type === 'Model') {\n                return source.data.mutationOperations.map(\n                // capitalize explicitly in case customer used lowercase model name\n                (op) => `${op}${capitalize(refTarget)}`);\n            }\n        })\n            .join('\", \"');\n        gqlHandlerContent += `@aws_subscribe(mutations: [\"${subscriptionSources}\"]) `;\n    }\n    const gqlField = `${callSignature}: ${returnTypeName} ${gqlHandlerContent}${authString}`;\n    return {\n        gqlField,\n        models: implicitModels,\n        lambdaFunctionDefinition,\n        customSqlDataSourceStrategy,\n    };\n}\n/**\n * Escape a string that will be used inside of a graphql string.\n * @param str The input string to be escaped\n * @returns The string with special charactars escaped\n */\nfunction escapeGraphQlString(str) {\n    return JSON.stringify(str);\n}\n/**\n * Tests whether two ModelField definitions are in conflict.\n *\n * This is a shallow check intended to catch conflicts between defined fields\n * and fields implied by authorization rules. Hence, it only compares type\n * and plurality.\n *\n * @param left\n * @param right\n * @returns\n */\nfunction areConflicting(left, right) {\n    // These are the only props we care about for this comparison, because the others\n    // (required, arrayRequired, etc) are not specified on auth or FK directives.\n    const relevantProps = ['array', 'fieldType'];\n    for (const prop of relevantProps) {\n        if (left.data[prop] !== right.data[prop]) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Merges one field defition object onto an existing one, performing\n * validation (conflict detection) along the way.\n *\n * @param existing An existing field map\n * @param additions A field map to merge in\n */\nfunction addFields(existing, additions) {\n    for (const [k, addition] of Object.entries(additions)) {\n        if (!existing[k]) {\n            existing[k] = addition;\n        }\n        else if (areConflicting(existing[k], addition)) {\n            throw new Error(`Field ${k} defined twice with conflicting definitions.`);\n        }\n        else {\n            // fields are defined on both sides, but match.\n        }\n    }\n}\n/**\n * Validate that no implicit fields are used by the model definition\n *\n * @param existing An existing field map\n * @param implicitFields A field map inferred from other schema usage\n *\n * @throws An error when an undefined field is used or when a field is used in a way that conflicts with its generated definition\n */\nfunction validateStaticFields(existing, implicitFields) {\n    if (implicitFields === undefined) {\n        return;\n    }\n    for (const [k, field] of Object.entries(implicitFields)) {\n        if (!existing[k]) {\n            throw new Error(`Field ${k} isn't defined.`);\n        }\n        else if (areConflicting(existing[k], field)) {\n            throw new Error(`Field ${k} defined twice with conflicting definitions.`);\n        }\n    }\n}\n/**\n * Validate that no implicit fields conflict with explicitly defined fields.\n *\n * @param existing An existing field map\n * @param implicitFields A field map inferred from other schema usage\n *\n * @throws An error when an undefined field is used or when a field is used in a way that conflicts with its generated definition\n */\nfunction validateImpliedFields(existing, implicitFields) {\n    if (implicitFields === undefined) {\n        return;\n    }\n    for (const [k, field] of Object.entries(implicitFields)) {\n        if (existing[k] && areConflicting(existing[k], field)) {\n            throw new Error(`Implicit field ${k} conflicts with the explicit field definition.`);\n        }\n    }\n}\n/**\n * Given a list of authorization rules, produces a set of the implied owner and/or\n * group fields, along with the associated graphql `@auth` string directive.\n *\n * This is intended to be called for each model and field to collect the implied\n * fields and directives from that individual \"item's\" auth rules.\n *\n * The computed directives are intended to be appended to the graphql field definition.\n *\n * The computed fields will be used to confirm no conflicts between explicit field definitions\n * and implicit auth fields.\n *\n * @param authorization A list of authorization rules.\n * @returns\n */\nfunction calculateAuth(authorization) {\n    const authFields = {};\n    const rules = [];\n    for (const entry of authorization) {\n        const rule = (0, Authorization_1.accessData)(entry);\n        const ruleParts = [];\n        if (rule.strategy) {\n            ruleParts.push([`allow: ${rule.strategy}`]);\n        }\n        else {\n            return {\n                authFields,\n                authString: '',\n            };\n        }\n        if (rule.provider) {\n            ruleParts.push(`provider: ${rule.provider}`);\n        }\n        if (rule.operations) {\n            ruleParts.push(`operations: [${rule.operations.join(', ')}]`);\n        }\n        if (rule.groupOrOwnerField) {\n            // directive attribute, depending whether it's owner or group auth\n            if (rule.strategy === 'groups') {\n                // does this need to be escaped?\n                ruleParts.push(`groupsField: \"${rule.groupOrOwnerField}\"`);\n            }\n            else {\n                // does this need to be escaped?\n                ruleParts.push(`ownerField: \"${rule.groupOrOwnerField}\"`);\n            }\n            // model field dep, type of which depends on whether multiple owner/group\n            // is required.\n            if (rule.multiOwner) {\n                addFields(authFields, { [rule.groupOrOwnerField]: (0, ModelField_1.string)().array() });\n            }\n            else {\n                addFields(authFields, { [rule.groupOrOwnerField]: (0, ModelField_1.string)() });\n            }\n        }\n        if (rule.groups) {\n            // does `group` need to be escaped?\n            ruleParts.push(`groups: [${rule.groups.map((group) => `\"${group}\"`).join(', ')}]`);\n        }\n        // identityClaim\n        if (rule.identityClaim) {\n            // does this need to be escaped?\n            ruleParts.push(`identityClaim: \"${rule.identityClaim}\"`);\n        }\n        // groupClaim\n        if (rule.groupClaim) {\n            // does this need to be escaped?\n            ruleParts.push(`groupClaim: \"${rule.groupClaim}\"`);\n        }\n        rules.push(`{${ruleParts.join(', ')}}`);\n    }\n    const authString = rules.length > 0 ? `@auth(rules: [${rules.join(',\\n  ')}])` : '';\n    return { authString, authFields };\n}\nfunction validateCustomAuthRule(rule) {\n    if (rule.groups && rule.provider === 'oidc') {\n        throw new Error('OIDC group auth is not supported with a.handler.custom');\n    }\n}\nfunction getCustomAuthProvider(rule) {\n    const strategyDict = {\n        public: {\n            default: '@aws_api_key',\n            apiKey: '@aws_api_key',\n            iam: '@aws_iam',\n        },\n        private: {\n            default: '@aws_cognito_user_pools',\n            userPools: '@aws_cognito_user_pools',\n            oidc: '@aws_oidc',\n            iam: '@aws_iam',\n        },\n        groups: {\n            default: '@aws_cognito_user_pools',\n            userPools: '@aws_cognito_user_pools',\n        },\n        custom: {\n            default: '@aws_lambda',\n            function: '@aws_lambda',\n        },\n    };\n    const stratProviders = strategyDict[rule.strategy];\n    if (stratProviders === undefined) {\n        throw new Error(`Unsupported auth strategy for custom handlers: ${rule.strategy}`);\n    }\n    const provider = rule.provider || 'default';\n    const stratProvider = stratProviders[provider];\n    if (stratProvider === undefined) {\n        throw new Error(`Unsupported provider for custom handlers: ${rule.provider}`);\n    }\n    return stratProvider;\n}\nfunction calculateCustomAuth(authorization) {\n    const rules = [];\n    for (const entry of authorization) {\n        const rule = (0, Authorization_1.accessData)(entry);\n        validateCustomAuthRule(rule);\n        const provider = getCustomAuthProvider(rule);\n        if (rule.groups) {\n            // example: (cognito_groups: [\"Bloggers\", \"Readers\"])\n            rules.push(`${provider}(cognito_groups: [${rule.groups\n                .map((group) => `\"${group}\"`)\n                .join(', ')}])`);\n        }\n        else {\n            rules.push(provider);\n        }\n    }\n    const authString = rules.join(' ');\n    return { authString };\n}\nfunction capitalize(s) {\n    return `${s[0].toUpperCase()}${s.slice(1)}`;\n}\nfunction processFieldLevelAuthRules(fields, authFields) {\n    const fieldLevelAuthRules = {};\n    for (const [fieldName, fieldDef] of Object.entries(fields)) {\n        const fieldAuth = fieldDef?.data?.authorization || [];\n        const { authString, authFields: fieldAuthField } = calculateAuth(fieldAuth);\n        if (authString)\n            fieldLevelAuthRules[fieldName] = authString;\n        if (fieldAuthField) {\n            addFields(authFields, fieldAuthField);\n        }\n    }\n    return fieldLevelAuthRules;\n}\nfunction processFields(typeName, fields, impliedFields, fieldLevelAuthRules, identifier, partitionKey, secondaryIndexes = {}) {\n    const gqlFields = [];\n    const models = [];\n    validateImpliedFields(fields, impliedFields);\n    for (const [fieldName, fieldDef] of Object.entries(fields)) {\n        const fieldAuth = fieldLevelAuthRules[fieldName]\n            ? ` ${fieldLevelAuthRules[fieldName]}`\n            : '';\n        if (isModelField(fieldDef)) {\n            gqlFields.push(`${fieldName}: ${modelFieldToGql(fieldDef.data)}${fieldAuth}`);\n        }\n        else if (isScalarField(fieldDef)) {\n            if (fieldName === partitionKey) {\n                gqlFields.push(`${fieldName}: ${scalarFieldToGql(fieldDef.data, identifier, secondaryIndexes[fieldName])}${fieldAuth}`);\n            }\n            else if (isRefField(fieldDef)) {\n                gqlFields.push(`${fieldName}: ${refFieldToGql(fieldDef.data)}${fieldAuth}`);\n            }\n            else if (isEnumType(fieldDef)) {\n                // The inline enum type name should be `<TypeName><FieldName>` to avoid\n                // enum type name conflicts\n                const enumName = `${capitalize(typeName)}${capitalize(fieldName)}`;\n                models.push([enumName, fieldDef]);\n                gqlFields.push(`${fieldName}: ${enumName}`);\n            }\n            else if (isCustomType(fieldDef)) {\n                // The inline CustomType name should be `<TypeName><FieldName>` to avoid\n                // CustomType name conflicts\n                const customTypeName = `${capitalize(typeName)}${capitalize(fieldName)}`;\n                models.push([customTypeName, fieldDef]);\n                gqlFields.push(`${fieldName}: ${customTypeName}`);\n            }\n            else {\n                gqlFields.push(`${fieldName}: ${scalarFieldToGql(fieldDef.data, undefined, secondaryIndexes[fieldName])}${fieldAuth}`);\n            }\n        }\n        else {\n            throw new Error(`Unexpected field definition: ${fieldDef}`);\n        }\n    }\n    return { gqlFields, models };\n}\n/**\n *\n * @param pk - partition key field name\n * @param sk - (optional) array of sort key field names\n * @returns default query field name\n */\nconst secondaryIndexDefaultQueryField = (pk, sk) => {\n    const skName = sk?.length ? 'And' + sk?.map(capitalize).join('And') : '';\n    const queryField = `listBy${capitalize(pk)}${skName}`;\n    return queryField;\n};\n/**\n * Given InternalModelIndexType[] returns a map where the key is the model field to be annotated with an @index directive\n * and the value is an array of transformed Amplify @index directives with all supplied attributes\n */\nconst transformedSecondaryIndexesForModel = (secondaryIndexes) => {\n    const indexDirectiveWithAttributes = (partitionKey, sortKeys, indexName, queryField) => {\n        if (!sortKeys.length && !indexName && !queryField) {\n            return `@index(queryField: \"${secondaryIndexDefaultQueryField(partitionKey)}\")`;\n        }\n        const attributes = [];\n        if (indexName) {\n            attributes.push(`name: \"${indexName}\"`);\n        }\n        if (sortKeys.length) {\n            attributes.push(`sortKeyFields: [${sortKeys.map((sk) => `\"${sk}\"`).join(', ')}]`);\n        }\n        if (queryField) {\n            attributes.push(`queryField: \"${queryField}\"`);\n        }\n        else {\n            attributes.push(`queryField: \"${secondaryIndexDefaultQueryField(partitionKey, sortKeys)}\"`);\n        }\n        return `@index(${attributes.join(', ')})`;\n    };\n    return secondaryIndexes.reduce((acc, { data: { partitionKey, sortKeys, indexName, queryField } }) => {\n        acc[partitionKey] = acc[partitionKey] || [];\n        acc[partitionKey].push(indexDirectiveWithAttributes(partitionKey, sortKeys, indexName, queryField));\n        return acc;\n    }, {});\n};\nconst ruleIsResourceAuth = (authRule) => {\n    const data = (0, Authorization_1.accessSchemaData)(authRule);\n    return data.strategy === 'resource';\n};\n/**\n * Separates out lambda resource auth rules from remaining schema rules.\n *\n * @param authRules schema auth rules\n */\nconst extractFunctionSchemaAccess = (authRules) => {\n    const schemaAuth = [];\n    const functionSchemaAccess = [];\n    const defaultActions = [\n        'query',\n        'mutate',\n        'listen',\n    ];\n    for (const rule of authRules) {\n        if (ruleIsResourceAuth(rule)) {\n            const ruleData = (0, Authorization_1.accessSchemaData)(rule);\n            const fnAccess = {\n                resourceProvider: ruleData.resource,\n                actions: ruleData.operations || defaultActions,\n            };\n            functionSchemaAccess.push(fnAccess);\n        }\n        else {\n            schemaAuth.push(rule);\n        }\n    }\n    return { schemaAuth, functionSchemaAccess };\n};\n/**\n * Returns a closure for retrieving reference type and definition from schema\n */\nconst getRefTypeForSchema = (schema) => {\n    const getRefType = (source, target) => {\n        const typeDef = schema.data.types[source];\n        if (typeDef === undefined) {\n            throw new Error(`Invalid ref. ${target} is referencing ${source} which is not defined in the schema`);\n        }\n        if (isInternalModel(typeDef)) {\n            return { type: 'Model', def: typeDef };\n        }\n        if (isCustomOperation(typeDef)) {\n            return { type: 'CustomOperation', def: typeDef };\n        }\n        if (isCustomType(typeDef)) {\n            return { type: 'CustomType', def: typeDef };\n        }\n        if (isEnumType(typeDef)) {\n            return { type: 'Enum', def: typeDef };\n        }\n        throw new Error(`Invalid ref. ${target} is referencing ${source} which is neither a Model, Custom Operation, Custom Type, or Enum`);\n    };\n    return getRefType;\n};\nconst schemaPreprocessor = (schema) => {\n    const gqlModels = [];\n    const customQueries = [];\n    const customMutations = [];\n    const customSubscriptions = [];\n    const jsFunctions = [];\n    const lambdaFunctions = {};\n    const customSqlDataSourceStrategies = [];\n    const databaseType = schema.data.configuration.database.engine === 'dynamodb'\n        ? 'dynamodb'\n        : 'sql';\n    const staticSchema = schema.data.configuration.database.engine === 'dynamodb' ? false : true;\n    const topLevelTypes = Object.entries(schema.data.types);\n    const { schemaAuth, functionSchemaAccess } = extractFunctionSchemaAccess(schema.data.authorization);\n    const getRefType = getRefTypeForSchema(schema);\n    for (const [typeName, typeDef] of topLevelTypes) {\n        const mostRelevantAuthRules = typeDef.data?.authorization?.length > 0\n            ? typeDef.data.authorization\n            : schemaAuth;\n        if (!isInternalModel(typeDef)) {\n            if (isEnumType(typeDef)) {\n                if (typeDef.values.some((value) => /\\s/.test(value))) {\n                    throw new Error(`Values of the enum type ${typeName} should not contain any whitespace.`);\n                }\n                const enumType = `enum ${typeName} {\\n  ${typeDef.values.join('\\n  ')}\\n}`;\n                gqlModels.push(enumType);\n            }\n            else if (isCustomType(typeDef)) {\n                const fields = typeDef.data.fields;\n                const fieldAuthApplicableFields = Object.fromEntries(Object.entries(fields).filter((pair) => isModelField(pair[1])));\n                const authString = '';\n                const authFields = {};\n                const fieldLevelAuthRules = processFieldLevelAuthRules(fieldAuthApplicableFields, authFields);\n                const { gqlFields, models } = processFields(typeName, fields, authFields, fieldLevelAuthRules);\n                topLevelTypes.push(...models);\n                const joined = gqlFields.join('\\n  ');\n                const model = `type ${typeName} ${authString}\\n{\\n  ${joined}\\n}`;\n                gqlModels.push(model);\n            }\n            else if (isCustomOperation(typeDef)) {\n                const { typeName: opType } = typeDef.data;\n                const { gqlField, models, jsFunctionForField, lambdaFunctionDefinition, customSqlDataSourceStrategy, } = transformCustomOperations(typeDef, typeName, mostRelevantAuthRules, databaseType, getRefType);\n                Object.assign(lambdaFunctions, lambdaFunctionDefinition);\n                topLevelTypes.push(...models);\n                if (jsFunctionForField) {\n                    jsFunctions.push(jsFunctionForField);\n                }\n                if (customSqlDataSourceStrategy) {\n                    customSqlDataSourceStrategies.push(customSqlDataSourceStrategy);\n                }\n                switch (opType) {\n                    case 'Query':\n                        customQueries.push(gqlField);\n                        break;\n                    case 'Mutation':\n                        customMutations.push(gqlField);\n                        break;\n                    case 'Subscription':\n                        customSubscriptions.push(gqlField);\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n        else if (staticSchema) {\n            const fields = { ...typeDef.data.fields };\n            const identifier = typeDef.data.identifier;\n            const [partitionKey] = identifier;\n            const { authString, authFields } = calculateAuth(mostRelevantAuthRules);\n            if (authString == '') {\n                throw new Error(`Model \\`${typeName}\\` is missing authorization rules. Add global rules to the schema or ensure every model has its own rules.`);\n            }\n            const fieldLevelAuthRules = processFieldLevelAuthRules(fields, authFields);\n            validateStaticFields(fields, authFields);\n            const { gqlFields, models } = processFields(typeName, fields, authFields, fieldLevelAuthRules, identifier, partitionKey);\n            topLevelTypes.push(...models);\n            const joined = gqlFields.join('\\n  ');\n            // TODO: update @model(timestamps: null) once a longer term solution gets\n            // determined.\n            //\n            // Context: SQL schema should not be automatically inserted with timestamp fields,\n            // passing (timestamps: null) to @model to suppress this behavior as a short\n            // term solution.\n            const model = `type ${typeName} @model(timestamps: null) ${authString}\\n{\\n  ${joined}\\n}`;\n            gqlModels.push(model);\n        }\n        else {\n            const fields = typeDef.data.fields;\n            const identifier = typeDef.data.identifier;\n            const [partitionKey] = identifier;\n            const transformedSecondaryIndexes = transformedSecondaryIndexesForModel(typeDef.data.secondaryIndexes);\n            const { authString, authFields } = calculateAuth(mostRelevantAuthRules);\n            if (authString == '') {\n                throw new Error(`Model \\`${typeName}\\` is missing authorization rules. Add global rules to the schema or ensure every model has its own rules.`);\n            }\n            const fieldLevelAuthRules = processFieldLevelAuthRules(fields, authFields);\n            const { gqlFields, models } = processFields(typeName, fields, authFields, fieldLevelAuthRules, identifier, partitionKey, transformedSecondaryIndexes);\n            topLevelTypes.push(...models);\n            const joined = gqlFields.join('\\n  ');\n            const model = `type ${typeName} @model ${authString}\\n{\\n  ${joined}\\n}`;\n            gqlModels.push(model);\n        }\n    }\n    const customOperations = {\n        queries: customQueries,\n        mutations: customMutations,\n        subscriptions: customSubscriptions,\n    };\n    gqlModels.push(...generateCustomOperationTypes(customOperations));\n    const processedSchema = gqlModels.join('\\n\\n');\n    return {\n        schema: processedSchema,\n        jsFunctions,\n        functionSchemaAccess,\n        lambdaFunctions,\n        customSqlDataSourceStrategies,\n    };\n};\nfunction validateCustomOperations(typeDef, typeName, authRules, getRefType) {\n    const { functionRef, handlers, typeName: opType, subscriptionSource, } = typeDef.data;\n    // TODO: remove `functionRef` after deprecating\n    const handlerConfigured = functionRef !== null || handlers?.length;\n    const authConfigured = authRules.length > 0;\n    if ((authConfigured && !handlerConfigured) ||\n        (handlerConfigured && !authConfigured)) {\n        // Deploying a custom operation with auth and no handler reference OR\n        // with a handler reference but no auth\n        // causes the CFN stack to reach an unrecoverable state. Ideally, this should be fixed\n        // in the CDK construct, but we're catching it early here as a stopgap\n        throw new Error(`Custom operation ${typeName} requires both an authorization rule and a handler reference`);\n    }\n    // Handlers must all be of the same type\n    if (handlers?.length) {\n        const configuredHandlers = new Set();\n        for (const handler of handlers) {\n            configuredHandlers.add((0, util_1.getBrand)(handler));\n        }\n        if (configuredHandlers.size > 1) {\n            const configuredHandlersStr = JSON.stringify(Array.from(configuredHandlers));\n            throw new Error(`Field handlers must be of the same type. ${typeName} has been configured with ${configuredHandlersStr}`);\n        }\n    }\n    if (opType === 'Subscription') {\n        if (subscriptionSource.length < 1) {\n            throw new Error(`${typeName} is missing a mutation source. Custom subscriptions must reference a mutation source via subscription().for(a.ref('ModelOrOperationName')) `);\n        }\n        let expectedReturnType;\n        for (const source of subscriptionSource) {\n            const sourceName = source.data.link;\n            const { type, def } = getRefType(sourceName, typeName);\n            if (type !== 'Model' && source.data.mutationOperations.length > 0) {\n                throw new Error(`Invalid subscription definition. .mutations() modifier can only be used with a Model ref. ${typeName} is referencing ${type}`);\n            }\n            let resolvedReturnType;\n            if (type === 'Model') {\n                if (source.data.mutationOperations.length === 0) {\n                    throw new Error(`Invalid subscription definition. .mutations() modifier must be used with a Model ref subscription source. ${typeName} is referencing ${sourceName} without specifying a mutation`);\n                }\n                else {\n                    resolvedReturnType = def;\n                }\n            }\n            if (type === 'CustomOperation') {\n                if (def.data.typeName !== 'Mutation') {\n                    throw new Error(`Invalid subscription definition. .for() can only reference a mutation. ${typeName} is referencing ${sourceName} which is a ${def.data.typeName}`);\n                }\n                else {\n                    const returnType = def.data.returnType;\n                    if (isRefField(returnType)) {\n                        ({ def: resolvedReturnType } = getRefType(returnType.data.link, typeName));\n                    }\n                    else {\n                        resolvedReturnType = returnType;\n                    }\n                }\n            }\n            expectedReturnType = expectedReturnType ?? resolvedReturnType;\n            // As the return types are resolved from the root `schema` object and they should\n            // not be mutated, we compare by references here.\n            if (expectedReturnType !== resolvedReturnType) {\n                throw new Error(`Invalid subscription definition. .for() can only reference resources that have the same return type. ${typeName} is referencing resources that have different return types.`);\n            }\n        }\n    }\n}\nconst isSqlReferenceHandler = (handler) => {\n    return Array.isArray(handler) && (0, util_1.getBrand)(handler[0]) === 'sqlReference';\n};\nconst isCustomHandler = (handler) => {\n    return Array.isArray(handler) && (0, util_1.getBrand)(handler[0]) === 'customHandler';\n};\nconst isFunctionHandler = (handler) => {\n    return Array.isArray(handler) && (0, util_1.getBrand)(handler[0]) === 'functionHandler';\n};\nconst normalizeDataSourceName = (dataSource) => {\n    // default data source\n    const noneDataSourceName = 'NONE_DS';\n    if (dataSource === undefined) {\n        return noneDataSourceName;\n    }\n    if (dataSourceIsRef(dataSource)) {\n        return `${dataSource.data.link}Table`;\n    }\n    return dataSource;\n};\nconst sanitizeStackTrace = (stackTrace) => {\n    // normalize EOL to \\n so that parsing is consistent across platforms\n    const normalizedStackTrace = stackTrace.replace(new RegExp(os.EOL), '\\n');\n    return (normalizedStackTrace\n        .split('\\n')\n        .map((line) => line.trim())\n        // filters out noise not relevant to the stack trace. All stack trace lines begin with 'at'\n        .filter((line) => line.startsWith('at')) || []);\n};\n// copied from the defineFunction path resolution impl:\n// https://github.com/aws-amplify/amplify-backend/blob/main/packages/backend-function/src/get_caller_directory.ts\nconst resolveEntryPath = (data, errorMessage) => {\n    if (path.isAbsolute(data.entry)) {\n        return data.entry;\n    }\n    if (!data.stack) {\n        throw new Error(errorMessage);\n    }\n    const stackTraceLines = sanitizeStackTrace(data.stack);\n    if (stackTraceLines.length < 2) {\n        throw new Error(errorMessage);\n    }\n    const stackTraceImportLine = stackTraceLines[1]; // the first entry is the file where the error was initialized (our code). The second entry is where the customer called our code which is what we are interested in\n    // if entry is relative, compute with respect to the caller directory\n    return { relativePath: data.entry, importLine: stackTraceImportLine };\n};\nconst handleCustom = (handlers, opType, typeName) => {\n    const transformedHandlers = handlers.map((handler) => {\n        const handlerData = (0, Handler_1.getHandlerData)(handler);\n        return {\n            dataSource: normalizeDataSourceName(handlerData.dataSource),\n            entry: resolveEntryPath(handlerData, 'Could not determine import path to construct absolute code path for custom handler. Consider using an absolute path instead.'),\n        };\n    });\n    const jsFn = {\n        typeName: opType,\n        fieldName: typeName,\n        handlers: transformedHandlers,\n    };\n    return jsFn;\n};\nfunction transformCustomOperations(typeDef, typeName, authRules, databaseType, getRefType) {\n    const { typeName: opType, handlers } = typeDef.data;\n    let jsFunctionForField = undefined;\n    validateCustomOperations(typeDef, typeName, authRules, getRefType);\n    if (isCustomHandler(handlers)) {\n        jsFunctionForField = handleCustom(handlers, opType, typeName);\n    }\n    const isCustom = Boolean(jsFunctionForField);\n    const { gqlField, models, lambdaFunctionDefinition, customSqlDataSourceStrategy, } = customOperationToGql(typeName, typeDef, authRules, isCustom, databaseType, getRefType);\n    return {\n        gqlField,\n        models,\n        jsFunctionForField,\n        lambdaFunctionDefinition,\n        customSqlDataSourceStrategy,\n    };\n}\nfunction generateCustomOperationTypes({ queries, mutations, subscriptions, }) {\n    const types = [];\n    if (mutations.length > 0) {\n        types.push(`type Mutation {\\n  ${mutations.join('\\n  ')}\\n}`);\n    }\n    if (queries.length > 0) {\n        types.push(`type Query {\\n  ${queries.join('\\n  ')}\\n}`);\n    }\n    if (subscriptions.length > 0) {\n        types.push(`type Subscription {\\n  ${subscriptions.join('\\n  ')}\\n}`);\n    }\n    return types;\n}\n/**\n * Returns API definition from ModelSchema or string schema\n * @param arg - { schema }\n * @returns DerivedApiDefinition that conforms to IAmplifyGraphqlDefinition\n */\nfunction processSchema(arg) {\n    const { schema, jsFunctions, functionSchemaAccess, lambdaFunctions, customSqlDataSourceStrategies, } = schemaPreprocessor(arg.schema);\n    return {\n        schema,\n        functionSlots: [],\n        jsFunctions,\n        functionSchemaAccess,\n        lambdaFunctions,\n        customSqlDataSourceStrategies,\n    };\n}\nexports.processSchema = processSchema;\n"],"names":[],"mappings":";;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,OAAO,CAAC,aAAa,GAAG,KAAK,CAAC,CAAC;AAC/B,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AACjC,MAAM,YAAY,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAC7C,MAAM,eAAe,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACnD,MAAM,iBAAiB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AACvD,MAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AACjC,MAAM,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACvC,MAAM,EAAE,GAAG,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;AAC/C,MAAM,IAAI,GAAG,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;AACnD,SAAS,eAAe,CAAC,KAAK,EAAE;AAChC,IAAI,IAAI,KAAK,CAAC,IAAI;AAClB,QAAQ,CAAC,YAAY,CAAC,KAAK,CAAC;AAC5B,QAAQ,CAAC,iBAAiB,CAAC,KAAK,CAAC,EAAE;AACnC,QAAQ,OAAO,IAAI,CAAC;AACpB,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,CAAC;AACD,SAAS,UAAU,CAAC,IAAI,EAAE;AAC1B,IAAI,IAAI,IAAI,EAAE,IAAI,KAAK,MAAM,EAAE;AAC/B,QAAQ,OAAO,IAAI,CAAC;AACpB,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,CAAC;AACD,SAAS,YAAY,CAAC,IAAI,EAAE;AAC5B,IAAI,IAAI,IAAI,EAAE,IAAI,EAAE,IAAI,KAAK,YAAY,EAAE;AAC3C,QAAQ,OAAO,IAAI,CAAC;AACpB,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,CAAC;AACD,SAAS,iBAAiB,CAAC,IAAI,EAAE;AACjC,IAAI,IAAI,iBAAiB,CAAC,oBAAoB,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,QAAQ,CAAC,EAAE;AAC/E,QAAQ,OAAO,IAAI,CAAC;AACpB,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,CAAC;AACD,SAAS,eAAe,CAAC,IAAI,EAAE;AAC/B,IAAI,OAAO,IAAI,EAAE,SAAS,KAAK,OAAO,CAAC;AACvC,CAAC;AACD,SAAS,gBAAgB,CAAC,IAAI,EAAE;AAChC,IAAI,OAAO,IAAI,EAAE,SAAS,KAAK,OAAO,CAAC;AACvC,CAAC;AACD,SAAS,aAAa,CAAC,IAAI,EAAE;AAC7B,IAAI,OAAO,IAAI,EAAE,IAAI,KAAK,KAAK,CAAC;AAChC,CAAC;AACD,SAAS,YAAY,CAAC,KAAK,EAAE;AAC7B,IAAI,OAAO,eAAe,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACxC,CAAC;AACD,SAAS,eAAe,CAAC,UAAU,EAAE;AACrC,IAAI,QAAQ,OAAO,UAAU,KAAK,QAAQ;AAC1C,QAAQ,UAAU,EAAE,IAAI;AACxB,QAAQ,UAAU,CAAC,IAAI,CAAC,IAAI,KAAK,KAAK,EAAE;AACxC,CAAC;AACD,SAAS,aAAa,CAAC,KAAK,EAAE;AAC9B,IAAI,OAAO,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACzC,CAAC;AACD,SAAS,UAAU,CAAC,KAAK,EAAE;AAC3B,IAAI,OAAO,aAAa,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;AACtC,CAAC;AACD,SAAS,gBAAgB,CAAC,QAAQ,EAAE,UAAU,EAAE,gBAAgB,GAAG,EAAE,EAAE;AACvE,IAAI,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,aAAa,EAAE,OAAO,EAAE,QAAQ,GAAG,GAAG,QAAQ,CAAC;AACvF,IAAI,IAAI,KAAK,GAAG,SAAS,CAAC;AAC1B,IAAI,IAAI,UAAU,KAAK,SAAS,EAAE;AAClC,QAAQ,KAAK,IAAI,GAAG,CAAC;AACrB,QAAQ,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;AACnC,YAAY,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE,CAAC,GAAG,UAAU,CAAC;AAC5C,YAAY,KAAK,IAAI,CAAC,6BAA6B,EAAE,EAAE;AACvD,iBAAiB,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;AACvC,iBAAiB,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;AAChC,SAAS;AACT,aAAa;AACb,YAAY,KAAK,IAAI,cAAc,CAAC;AACpC,SAAS;AACT,QAAQ,KAAK,MAAM,KAAK,IAAI,gBAAgB,EAAE;AAC9C,YAAY,KAAK,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AACjC,SAAS;AACT,QAAQ,OAAO,KAAK,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,QAAQ,KAAK,IAAI,EAAE;AAC3B,QAAQ,KAAK,IAAI,GAAG,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,KAAK,EAAE;AACf,QAAQ,KAAK,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7B,QAAQ,IAAI,aAAa,KAAK,IAAI,EAAE;AACpC,YAAY,KAAK,IAAI,GAAG,CAAC;AACzB,SAAS;AACT,KAAK;AACL,IAAI,IAAI,QAAQ,KAAK,SAAS,EAAE;AAChC,QAAQ,KAAK,IAAI,CAAC,kBAAkB,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAC;AAC/D,KAAK;AACL,IAAI,KAAK,MAAM,KAAK,IAAI,gBAAgB,EAAE;AAC1C,QAAQ,KAAK,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AAC7B,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,CAAC;AACD,SAAS,eAAe,CAAC,QAAQ,EAAE;AACnC,IAAI,MAAM,EAAE,IAAI,EAAE,YAAY,EAAE,KAAK,EAAE,aAAa,EAAE,aAAa,EAAE,UAAU,GAAG,GAAG,QAAQ,CAAC;AAC9F,IAAI,IAAI,KAAK,GAAG,YAAY,CAAC;AAC7B,IAAI,IAAI,aAAa,KAAK,IAAI,EAAE;AAChC,QAAQ,KAAK,IAAI,GAAG,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,KAAK,EAAE;AACf,QAAQ,KAAK,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7B,KAAK;AACL,IAAI,IAAI,aAAa,KAAK,IAAI,EAAE;AAChC,QAAQ,KAAK,IAAI,GAAG,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,UAAU,IAAI,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;AAC1E,QAAQ,KAAK,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,cAAc,EAAE,UAAU,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACvF,KAAK;AACL,SAAS;AACT,QAAQ,KAAK,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC;AAC7B,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,CAAC;AACD,SAAS,aAAa,CAAC,QAAQ,EAAE;AACjC,IAAI,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,KAAK,EAAE,aAAa,EAAE,GAAG,QAAQ,CAAC;AACnE,IAAI,IAAI,KAAK,GAAG,IAAI,CAAC;AACrB,IAAI,IAAI,aAAa,KAAK,IAAI,EAAE;AAChC,QAAQ,KAAK,IAAI,GAAG,CAAC;AACrB,KAAK;AACL,IAAI,IAAI,KAAK,KAAK,IAAI,EAAE;AACxB,QAAQ,KAAK,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7B,KAAK;AACL,IAAI,IAAI,aAAa,KAAK,IAAI,EAAE;AAChC,QAAQ,KAAK,IAAI,GAAG,CAAC;AACrB,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,CAAC;AACD,SAAS,wBAAwB,CAAC,QAAQ,EAAE,iBAAiB,EAAE;AAC/D,IAAI,IAAI,iBAAiB,GAAG,EAAE,CAAC;AAC/B,IAAI,MAAM,wBAAwB,GAAG,EAAE,CAAC;AACxC,IAAI,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,GAAG,KAAK;AACvC,QAAQ,MAAM,WAAW,GAAG,IAAI,SAAS,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;AACnE,QAAQ,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE;AAC7C,YAAY,iBAAiB,IAAI,CAAC,iBAAiB,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC;AACtE,SAAS;AACT,aAAa,IAAI,OAAO,WAAW,CAAC,WAAW,KAAK,UAAU,EAAE;AAChE,YAAY,MAAM,MAAM,GAAG,CAAC,EAAE,EAAE,UAAU,CAAC,iBAAiB,CAAC,CAAC,EAAE,GAAG,KAAK,CAAC,GAAG,EAAE,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChG,YAAY,wBAAwB,CAAC,MAAM,CAAC,GAAG,WAAW,CAAC;AAC3D,YAAY,iBAAiB,IAAI,CAAC,iBAAiB,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;AACjE,SAAS;AACT,aAAa;AACb,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,4BAA4B,EAAE,iBAAiB,CAAC,wDAAwD,CAAC,CAAC,CAAC;AACxI,SAAS;AACT,KAAK,CAAC,CAAC;AACP,IAAI,OAAO,EAAE,iBAAiB,EAAE,wBAAwB,EAAE,CAAC;AAC3D,CAAC;AACD,SAAS,oBAAoB,CAAC,QAAQ,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ,GAAG,KAAK,EAAE,YAAY,EAAE,UAAU,EAAE;AAC5G,IAAI,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,QAAQ,EAAE,kBAAkB,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC;AAC5H,IAAI,IAAI,aAAa,GAAG,QAAQ,CAAC;AACjC,IAAI,MAAM,cAAc,GAAG,EAAE,CAAC;AAC9B,IAAI,MAAM,EAAE,UAAU,EAAE,GAAG,QAAQ;AACnC,UAAU,mBAAmB,CAAC,aAAa,CAAC;AAC5C,UAAU,aAAa,CAAC,aAAa,CAAC,CAAC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,MAAM,mCAAmC,GAAG,CAAC,UAAU,EAAE,EAAE,eAAe,EAAE,mCAAmC,GAAG,IAAI,GAAG,KAAK;AAClI,QAAQ,IAAI,UAAU,CAAC,UAAU,CAAC,EAAE;AACpC,YAAY,OAAO,aAAa,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AACnD,SAAS;AACT,aAAa,IAAI,YAAY,CAAC,UAAU,CAAC,EAAE;AAC3C,YAAY,MAAM,cAAc,GAAG,CAAC,EAAE,UAAU,CAAC,eAAe,CAAC,CAAC,UAAU,CAAC,CAAC;AAC9E,YAAY,IAAI,mCAAmC,EAAE;AACrD,gBAAgB,cAAc,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC,CAAC;AAClE,aAAa;AACb,YAAY,OAAO,cAAc,CAAC;AAClC,SAAS;AACT,aAAa,IAAI,aAAa,CAAC,UAAU,CAAC,EAAE;AAC5C,YAAY,OAAO,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;AACtD,SAAS;AACT,aAAa;AACb,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,4BAA4B,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;AACvE,SAAS;AACT,KAAK,CAAC;AACN,IAAI,IAAI,cAAc,CAAC;AACvB,IAAI,IAAI,MAAM,KAAK,cAAc,IAAI,UAAU,KAAK,IAAI,EAAE;AAC1D;AACA;AACA,QAAQ,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,UAAU,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;AACpF,QAAQ,IAAI,IAAI,KAAK,iBAAiB,EAAE;AACxC,YAAY,cAAc,GAAG,mCAAmC,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE;AACtF,gBAAgB,eAAe,EAAE,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI;AAChE,gBAAgB,mCAAmC,EAAE,KAAK;AAC1D,aAAa,CAAC,CAAC;AACf,SAAS;AACT,aAAa;AACb,YAAY,cAAc,GAAG,aAAa,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;AACvE,SAAS;AACT,KAAK;AACL,SAAS;AACT,QAAQ,cAAc,GAAG,mCAAmC,CAAC,UAAU,EAAE;AACzE,YAAY,eAAe,EAAE,QAAQ;AACrC,SAAS,CAAC,CAAC;AACX,KAAK;AACL,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE;AAC3C,QAAQ,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,aAAa,CAAC,QAAQ,EAAE,SAAS,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;AACjF,QAAQ,aAAa,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AACrD,QAAQ,cAAc,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;AACvC,KAAK;AACL,IAAI,MAAM,OAAO,GAAG,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC5C,IAAI,MAAM,KAAK,GAAG,OAAO,IAAI,IAAI,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AAC3D,IAAI,IAAI,iBAAiB,GAAG,EAAE,CAAC;AAC/B,IAAI,IAAI,wBAAwB,GAAG,EAAE,CAAC;AACtC,IAAI,IAAI,2BAA2B,CAAC;AACpC,IAAI,IAAI,iBAAiB,CAAC,QAAQ,CAAC,EAAE;AACrC,QAAQ,CAAC,EAAE,iBAAiB,EAAE,wBAAwB,EAAE,GAAG,wBAAwB,CAAC,QAAQ,EAAE,QAAQ,CAAC,EAAE;AACzG,KAAK;AACL,SAAS,IAAI,WAAW,EAAE;AAC1B,QAAQ,iBAAiB,GAAG,CAAC,iBAAiB,EAAE,WAAW,CAAC,GAAG,CAAC,CAAC;AACjE,KAAK;AACL,SAAS,IAAI,YAAY,KAAK,KAAK,IAAI,OAAO,IAAI,KAAK,KAAK,WAAW,EAAE;AACzE,QAAQ,iBAAiB,GAAG,CAAC,gBAAgB,EAAE,mBAAmB,CAAC,MAAM,CAAC,IAAI,SAAS,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACvH,QAAQ,2BAA2B,GAAG;AACtC,YAAY,QAAQ,EAAE,MAAM;AAC5B,YAAY,SAAS,EAAE,QAAQ;AAC/B,SAAS,CAAC;AACV,KAAK;AACL,SAAS,IAAI,qBAAqB,CAAC,QAAQ,CAAC,EAAE;AAC9C,QAAQ,MAAM,WAAW,GAAG,IAAI,SAAS,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AACvE,QAAQ,MAAM,KAAK,GAAG,gBAAgB,CAAC,WAAW,EAAE,qIAAqI,CAAC,CAAC;AAC3L,QAAQ,MAAM,SAAS,GAAG,OAAO,KAAK,KAAK,QAAQ,GAAG,KAAK,GAAG,KAAK,CAAC,YAAY,CAAC;AACjF,QAAQ,2BAA2B,GAAG;AACtC,YAAY,QAAQ,EAAE,MAAM;AAC5B,YAAY,SAAS,EAAE,QAAQ;AAC/B,YAAY,KAAK;AACjB,SAAS,CAAC;AACV,QAAQ,iBAAiB,GAAG,CAAC,iBAAiB,EAAE,SAAS,CAAC,GAAG,CAAC,CAAC;AAC/D,KAAK;AACL,IAAI,IAAI,MAAM,KAAK,cAAc,EAAE;AACnC,QAAQ,MAAM,mBAAmB,GAAG,kBAAkB;AACtD,aAAa,OAAO,CAAC,CAAC,MAAM,KAAK;AACjC,YAAY,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;AAC/C,YAAY,MAAM,EAAE,IAAI,EAAE,GAAG,UAAU,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;AAC7D,YAAY,IAAI,IAAI,KAAK,iBAAiB,EAAE;AAC5C,gBAAgB,OAAO,SAAS,CAAC;AACjC,aAAa;AACb,YAAY,IAAI,IAAI,KAAK,OAAO,EAAE;AAClC,gBAAgB,OAAO,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG;AACzD;AACA,gBAAgB,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;AACzD,aAAa;AACb,SAAS,CAAC;AACV,aAAa,IAAI,CAAC,MAAM,CAAC,CAAC;AAC1B,QAAQ,iBAAiB,IAAI,CAAC,4BAA4B,EAAE,mBAAmB,CAAC,IAAI,CAAC,CAAC;AACtF,KAAK;AACL,IAAI,MAAM,QAAQ,GAAG,CAAC,EAAE,aAAa,CAAC,EAAE,EAAE,cAAc,CAAC,CAAC,EAAE,iBAAiB,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC;AAC7F,IAAI,OAAO;AACX,QAAQ,QAAQ;AAChB,QAAQ,MAAM,EAAE,cAAc;AAC9B,QAAQ,wBAAwB;AAChC,QAAQ,2BAA2B;AACnC,KAAK,CAAC;AACN,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,SAAS,mBAAmB,CAAC,GAAG,EAAE;AAClC,IAAI,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;AAC/B,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE;AACrC;AACA;AACA,IAAI,MAAM,aAAa,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;AACjD,IAAI,KAAK,MAAM,IAAI,IAAI,aAAa,EAAE;AACtC,QAAQ,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;AAClD,YAAY,OAAO,IAAI,CAAC;AACxB,SAAS;AACT,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,SAAS,CAAC,QAAQ,EAAE,SAAS,EAAE;AACxC,IAAI,KAAK,MAAM,CAAC,CAAC,EAAE,QAAQ,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;AAC3D,QAAQ,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;AAC1B,YAAY,QAAQ,CAAC,CAAC,CAAC,GAAG,QAAQ,CAAC;AACnC,SAAS;AACT,aAAa,IAAI,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE;AACxD,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,4CAA4C,CAAC,CAAC,CAAC;AACtF,SAAS;AACT,aAAa,CAEJ;AACT,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,oBAAoB,CAAC,QAAQ,EAAE,cAAc,EAAE;AACxD,IAAI,IAAI,cAAc,KAAK,SAAS,EAAE;AACtC,QAAQ,OAAO;AACf,KAAK;AACL,IAAI,KAAK,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE;AAC7D,QAAQ,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE;AAC1B,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC;AACzD,SAAS;AACT,aAAa,IAAI,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE;AACrD,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,4CAA4C,CAAC,CAAC,CAAC;AACtF,SAAS;AACT,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,qBAAqB,CAAC,QAAQ,EAAE,cAAc,EAAE;AACzD,IAAI,IAAI,cAAc,KAAK,SAAS,EAAE;AACtC,QAAQ,OAAO;AACf,KAAK;AACL,IAAI,KAAK,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE;AAC7D,QAAQ,IAAI,QAAQ,CAAC,CAAC,CAAC,IAAI,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE;AAC/D,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,eAAe,EAAE,CAAC,CAAC,8CAA8C,CAAC,CAAC,CAAC;AACjG,SAAS;AACT,KAAK;AACL,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,aAAa,CAAC,aAAa,EAAE;AACtC,IAAI,MAAM,UAAU,GAAG,EAAE,CAAC;AAC1B,IAAI,MAAM,KAAK,GAAG,EAAE,CAAC;AACrB,IAAI,KAAK,MAAM,KAAK,IAAI,aAAa,EAAE;AACvC,QAAQ,MAAM,IAAI,GAAG,IAAI,eAAe,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;AAC5D,QAAQ,MAAM,SAAS,GAAG,EAAE,CAAC;AAC7B,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE;AAC3B,YAAY,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;AACxD,SAAS;AACT,aAAa;AACb,YAAY,OAAO;AACnB,gBAAgB,UAAU;AAC1B,gBAAgB,UAAU,EAAE,EAAE;AAC9B,aAAa,CAAC;AACd,SAAS;AACT,QAAQ,IAAI,IAAI,CAAC,QAAQ,EAAE;AAC3B,YAAY,SAAS,CAAC,IAAI,CAAC,CAAC,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACzD,SAAS;AACT,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAE;AAC7B,YAAY,SAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1E,SAAS;AACT,QAAQ,IAAI,IAAI,CAAC,iBAAiB,EAAE;AACpC;AACA,YAAY,IAAI,IAAI,CAAC,QAAQ,KAAK,QAAQ,EAAE;AAC5C;AACA,gBAAgB,SAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3E,aAAa;AACb,iBAAiB;AACjB;AACA,gBAAgB,SAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1E,aAAa;AACb;AACA;AACA,YAAY,IAAI,IAAI,CAAC,UAAU,EAAE;AACjC,gBAAgB,SAAS,CAAC,UAAU,EAAE,EAAE,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,YAAY,CAAC,MAAM,GAAG,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;AACxG,aAAa;AACb,iBAAiB;AACjB,gBAAgB,SAAS,CAAC,UAAU,EAAE,EAAE,CAAC,IAAI,CAAC,iBAAiB,GAAG,IAAI,YAAY,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC;AAChG,aAAa;AACb,SAAS;AACT,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE;AACzB;AACA,YAAY,SAAS,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/F,SAAS;AACT;AACA,QAAQ,IAAI,IAAI,CAAC,aAAa,EAAE;AAChC;AACA,YAAY,SAAS,CAAC,IAAI,CAAC,CAAC,gBAAgB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC;AACrE,SAAS;AACT;AACA,QAAQ,IAAI,IAAI,CAAC,UAAU,EAAE;AAC7B;AACA,YAAY,SAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/D,SAAS;AACT,QAAQ,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChD,KAAK;AACL,IAAI,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC,cAAc,EAAE,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC;AACxF,IAAI,OAAO,EAAE,UAAU,EAAE,UAAU,EAAE,CAAC;AACtC,CAAC;AACD,SAAS,sBAAsB,CAAC,IAAI,EAAE;AACtC,IAAI,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,KAAK,MAAM,EAAE;AACjD,QAAQ,MAAM,IAAI,KAAK,CAAC,wDAAwD,CAAC,CAAC;AAClF,KAAK;AACL,CAAC;AACD,SAAS,qBAAqB,CAAC,IAAI,EAAE;AACrC,IAAI,MAAM,YAAY,GAAG;AACzB,QAAQ,MAAM,EAAE;AAChB,YAAY,OAAO,EAAE,cAAc;AACnC,YAAY,MAAM,EAAE,cAAc;AAClC,YAAY,GAAG,EAAE,UAAU;AAC3B,SAAS;AACT,QAAQ,OAAO,EAAE;AACjB,YAAY,OAAO,EAAE,yBAAyB;AAC9C,YAAY,SAAS,EAAE,yBAAyB;AAChD,YAAY,IAAI,EAAE,WAAW;AAC7B,YAAY,GAAG,EAAE,UAAU;AAC3B,SAAS;AACT,QAAQ,MAAM,EAAE;AAChB,YAAY,OAAO,EAAE,yBAAyB;AAC9C,YAAY,SAAS,EAAE,yBAAyB;AAChD,SAAS;AACT,QAAQ,MAAM,EAAE;AAChB,YAAY,OAAO,EAAE,aAAa;AAClC,YAAY,QAAQ,EAAE,aAAa;AACnC,SAAS;AACT,KAAK,CAAC;AACN,IAAI,MAAM,cAAc,GAAG,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACvD,IAAI,IAAI,cAAc,KAAK,SAAS,EAAE;AACtC,QAAQ,MAAM,IAAI,KAAK,CAAC,CAAC,+CAA+C,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC3F,KAAK;AACL,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,SAAS,CAAC;AAChD,IAAI,MAAM,aAAa,GAAG,cAAc,CAAC,QAAQ,CAAC,CAAC;AACnD,IAAI,IAAI,aAAa,KAAK,SAAS,EAAE;AACrC,QAAQ,MAAM,IAAI,KAAK,CAAC,CAAC,0CAA0C,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACtF,KAAK;AACL,IAAI,OAAO,aAAa,CAAC;AACzB,CAAC;AACD,SAAS,mBAAmB,CAAC,aAAa,EAAE;AAC5C,IAAI,MAAM,KAAK,GAAG,EAAE,CAAC;AACrB,IAAI,KAAK,MAAM,KAAK,IAAI,aAAa,EAAE;AACvC,QAAQ,MAAM,IAAI,GAAG,IAAI,eAAe,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;AAC5D,QAAQ,sBAAsB,CAAC,IAAI,CAAC,CAAC;AACrC,QAAQ,MAAM,QAAQ,GAAG,qBAAqB,CAAC,IAAI,CAAC,CAAC;AACrD,QAAQ,IAAI,IAAI,CAAC,MAAM,EAAE;AACzB;AACA,YAAY,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,QAAQ,CAAC,kBAAkB,EAAE,IAAI,CAAC,MAAM;AAClE,iBAAiB,GAAG,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;AAC7C,iBAAiB,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACjC,SAAS;AACT,aAAa;AACb,YAAY,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACjC,SAAS;AACT,KAAK;AACL,IAAI,MAAM,UAAU,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACvC,IAAI,OAAO,EAAE,UAAU,EAAE,CAAC;AAC1B,CAAC;AACD,SAAS,UAAU,CAAC,CAAC,EAAE;AACvB,IAAI,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChD,CAAC;AACD,SAAS,0BAA0B,CAAC,MAAM,EAAE,UAAU,EAAE;AACxD,IAAI,MAAM,mBAAmB,GAAG,EAAE,CAAC;AACnC,IAAI,KAAK,MAAM,CAAC,SAAS,EAAE,QAAQ,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;AAChE,QAAQ,MAAM,SAAS,GAAG,QAAQ,EAAE,IAAI,EAAE,aAAa,IAAI,EAAE,CAAC;AAC9D,QAAQ,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,cAAc,EAAE,GAAG,aAAa,CAAC,SAAS,CAAC,CAAC;AACpF,QAAQ,IAAI,UAAU;AACtB,YAAY,mBAAmB,CAAC,SAAS,CAAC,GAAG,UAAU,CAAC;AACxD,QAAQ,IAAI,cAAc,EAAE;AAC5B,YAAY,SAAS,CAAC,UAAU,EAAE,cAAc,CAAC,CAAC;AAClD,SAAS;AACT,KAAK;AACL,IAAI,OAAO,mBAAmB,CAAC;AAC/B,CAAC;AACD,SAAS,aAAa,CAAC,QAAQ,EAAE,MAAM,EAAE,aAAa,EAAE,mBAAmB,EAAE,UAAU,EAAE,YAAY,EAAE,gBAAgB,GAAG,EAAE,EAAE;AAC9H,IAAI,MAAM,SAAS,GAAG,EAAE,CAAC;AACzB,IAAI,MAAM,MAAM,GAAG,EAAE,CAAC;AACtB,IAAI,qBAAqB,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;AACjD,IAAI,KAAK,MAAM,CAAC,SAAS,EAAE,QAAQ,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;AAChE,QAAQ,MAAM,SAAS,GAAG,mBAAmB,CAAC,SAAS,CAAC;AACxD,cAAc,CAAC,CAAC,EAAE,mBAAmB,CAAC,SAAS,CAAC,CAAC,CAAC;AAClD,cAAc,EAAE,CAAC;AACjB,QAAQ,IAAI,YAAY,CAAC,QAAQ,CAAC,EAAE;AACpC,YAAY,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;AAC1F,SAAS;AACT,aAAa,IAAI,aAAa,CAAC,QAAQ,CAAC,EAAE;AAC1C,YAAY,IAAI,SAAS,KAAK,YAAY,EAAE;AAC5C,gBAAgB,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,gBAAgB,CAAC,QAAQ,CAAC,IAAI,EAAE,UAAU,EAAE,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;AACxI,aAAa;AACb,iBAAiB,IAAI,UAAU,CAAC,QAAQ,CAAC,EAAE;AAC3C,gBAAgB,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;AAC5F,aAAa;AACb,iBAAiB,IAAI,UAAU,CAAC,QAAQ,CAAC,EAAE;AAC3C;AACA;AACA,gBAAgB,MAAM,QAAQ,GAAG,CAAC,EAAE,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACnF,gBAAgB,MAAM,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC;AAClD,gBAAgB,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC5D,aAAa;AACb,iBAAiB,IAAI,YAAY,CAAC,QAAQ,CAAC,EAAE;AAC7C;AACA;AACA,gBAAgB,MAAM,cAAc,GAAG,CAAC,EAAE,UAAU,CAAC,QAAQ,CAAC,CAAC,EAAE,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AACzF,gBAAgB,MAAM,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC,CAAC;AACxD,gBAAgB,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,cAAc,CAAC,CAAC,CAAC,CAAC;AAClE,aAAa;AACb,iBAAiB;AACjB,gBAAgB,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,EAAE,gBAAgB,CAAC,QAAQ,CAAC,IAAI,EAAE,SAAS,EAAE,gBAAgB,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC;AACvI,aAAa;AACb,SAAS;AACT,aAAa;AACb,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,6BAA6B,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC;AACxE,SAAS;AACT,KAAK;AACL,IAAI,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,CAAC;AACjC,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,+BAA+B,GAAG,CAAC,EAAE,EAAE,EAAE,KAAK;AACpD,IAAI,MAAM,MAAM,GAAG,EAAE,EAAE,MAAM,GAAG,KAAK,GAAG,EAAE,EAAE,GAAG,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE,CAAC;AAC7E,IAAI,MAAM,UAAU,GAAG,CAAC,MAAM,EAAE,UAAU,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;AAC1D,IAAI,OAAO,UAAU,CAAC;AACtB,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA,MAAM,mCAAmC,GAAG,CAAC,gBAAgB,KAAK;AAClE,IAAI,MAAM,4BAA4B,GAAG,CAAC,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,KAAK;AAC5F,QAAQ,IAAI,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,SAAS,IAAI,CAAC,UAAU,EAAE;AAC3D,YAAY,OAAO,CAAC,oBAAoB,EAAE,+BAA+B,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC;AAC5F,SAAS;AACT,QAAQ,MAAM,UAAU,GAAG,EAAE,CAAC;AAC9B,QAAQ,IAAI,SAAS,EAAE;AACvB,YAAY,UAAU,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;AACpD,SAAS;AACT,QAAQ,IAAI,QAAQ,CAAC,MAAM,EAAE;AAC7B,YAAY,UAAU,CAAC,IAAI,CAAC,CAAC,gBAAgB,EAAE,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9F,SAAS;AACT,QAAQ,IAAI,UAAU,EAAE;AACxB,YAAY,UAAU,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3D,SAAS;AACT,aAAa;AACb,YAAY,UAAU,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,+BAA+B,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxG,SAAS;AACT,QAAQ,OAAO,CAAC,OAAO,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAClD,KAAK,CAAC;AACN,IAAI,OAAO,gBAAgB,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,EAAE,IAAI,EAAE,EAAE,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAE,EAAE,KAAK;AACzG,QAAQ,GAAG,CAAC,YAAY,CAAC,GAAG,GAAG,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;AACpD,QAAQ,GAAG,CAAC,YAAY,CAAC,CAAC,IAAI,CAAC,4BAA4B,CAAC,YAAY,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC,CAAC;AAC5G,QAAQ,OAAO,GAAG,CAAC;AACnB,KAAK,EAAE,EAAE,CAAC,CAAC;AACX,CAAC,CAAC;AACF,MAAM,kBAAkB,GAAG,CAAC,QAAQ,KAAK;AACzC,IAAI,MAAM,IAAI,GAAG,IAAI,eAAe,CAAC,gBAAgB,EAAE,QAAQ,CAAC,CAAC;AACjE,IAAI,OAAO,IAAI,CAAC,QAAQ,KAAK,UAAU,CAAC;AACxC,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA,MAAM,2BAA2B,GAAG,CAAC,SAAS,KAAK;AACnD,IAAI,MAAM,UAAU,GAAG,EAAE,CAAC;AAC1B,IAAI,MAAM,oBAAoB,GAAG,EAAE,CAAC;AACpC,IAAI,MAAM,cAAc,GAAG;AAC3B,QAAQ,OAAO;AACf,QAAQ,QAAQ;AAChB,QAAQ,QAAQ;AAChB,KAAK,CAAC;AACN,IAAI,KAAK,MAAM,IAAI,IAAI,SAAS,EAAE;AAClC,QAAQ,IAAI,kBAAkB,CAAC,IAAI,CAAC,EAAE;AACtC,YAAY,MAAM,QAAQ,GAAG,IAAI,eAAe,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;AACzE,YAAY,MAAM,QAAQ,GAAG;AAC7B,gBAAgB,gBAAgB,EAAE,QAAQ,CAAC,QAAQ;AACnD,gBAAgB,OAAO,EAAE,QAAQ,CAAC,UAAU,IAAI,cAAc;AAC9D,aAAa,CAAC;AACd,YAAY,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAChD,SAAS;AACT,aAAa;AACb,YAAY,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAClC,SAAS;AACT,KAAK;AACL,IAAI,OAAO,EAAE,UAAU,EAAE,oBAAoB,EAAE,CAAC;AAChD,CAAC,CAAC;AACF;AACA;AACA;AACA,MAAM,mBAAmB,GAAG,CAAC,MAAM,KAAK;AACxC,IAAI,MAAM,UAAU,GAAG,CAAC,MAAM,EAAE,MAAM,KAAK;AAC3C,QAAQ,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;AAClD,QAAQ,IAAI,OAAO,KAAK,SAAS,EAAE;AACnC,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,aAAa,EAAE,MAAM,CAAC,gBAAgB,EAAE,MAAM,CAAC,mCAAmC,CAAC,CAAC,CAAC;AAClH,SAAS;AACT,QAAQ,IAAI,eAAe,CAAC,OAAO,CAAC,EAAE;AACtC,YAAY,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC;AACnD,SAAS;AACT,QAAQ,IAAI,iBAAiB,CAAC,OAAO,CAAC,EAAE;AACxC,YAAY,OAAO,EAAE,IAAI,EAAE,iBAAiB,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC;AAC7D,SAAS;AACT,QAAQ,IAAI,YAAY,CAAC,OAAO,CAAC,EAAE;AACnC,YAAY,OAAO,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC;AACxD,SAAS;AACT,QAAQ,IAAI,UAAU,CAAC,OAAO,CAAC,EAAE;AACjC,YAAY,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,CAAC;AAClD,SAAS;AACT,QAAQ,MAAM,IAAI,KAAK,CAAC,CAAC,aAAa,EAAE,MAAM,CAAC,gBAAgB,EAAE,MAAM,CAAC,iEAAiE,CAAC,CAAC,CAAC;AAC5I,KAAK,CAAC;AACN,IAAI,OAAO,UAAU,CAAC;AACtB,CAAC,CAAC;AACF,MAAM,kBAAkB,GAAG,CAAC,MAAM,KAAK;AACvC,IAAI,MAAM,SAAS,GAAG,EAAE,CAAC;AACzB,IAAI,MAAM,aAAa,GAAG,EAAE,CAAC;AAC7B,IAAI,MAAM,eAAe,GAAG,EAAE,CAAC;AAC/B,IAAI,MAAM,mBAAmB,GAAG,EAAE,CAAC;AACnC,IAAI,MAAM,WAAW,GAAG,EAAE,CAAC;AAC3B,IAAI,MAAM,eAAe,GAAG,EAAE,CAAC;AAC/B,IAAI,MAAM,6BAA6B,GAAG,EAAE,CAAC;AAC7C,IAAI,MAAM,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,KAAK,UAAU;AACjF,UAAU,UAAU;AACpB,UAAU,KAAK,CAAC;AAChB,IAAI,MAAM,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,MAAM,KAAK,UAAU,GAAG,KAAK,GAAG,IAAI,CAAC;AACjG,IAAI,MAAM,aAAa,GAAG,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC5D,IAAI,MAAM,EAAE,UAAU,EAAE,oBAAoB,EAAE,GAAG,2BAA2B,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AACxG,IAAI,MAAM,UAAU,GAAG,mBAAmB,CAAC,MAAM,CAAC,CAAC;AACnD,IAAI,KAAK,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,IAAI,aAAa,EAAE;AACrD,QAAQ,MAAM,qBAAqB,GAAG,OAAO,CAAC,IAAI,EAAE,aAAa,EAAE,MAAM,GAAG,CAAC;AAC7E,cAAc,OAAO,CAAC,IAAI,CAAC,aAAa;AACxC,cAAc,UAAU,CAAC;AACzB,QAAQ,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,EAAE;AACvC,YAAY,IAAI,UAAU,CAAC,OAAO,CAAC,EAAE;AACrC,gBAAgB,IAAI,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;AACtE,oBAAoB,MAAM,IAAI,KAAK,CAAC,CAAC,wBAAwB,EAAE,QAAQ,CAAC,mCAAmC,CAAC,CAAC,CAAC;AAC9G,iBAAiB;AACjB,gBAAgB,MAAM,QAAQ,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC;AAC3F,gBAAgB,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACzC,aAAa;AACb,iBAAiB,IAAI,YAAY,CAAC,OAAO,CAAC,EAAE;AAC5C,gBAAgB,MAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;AACnD,gBAAgB,MAAM,yBAAyB,GAAG,MAAM,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,KAAK,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACrI,gBAAgB,MAAM,UAAU,GAAG,EAAE,CAAC;AACtC,gBAAgB,MAAM,UAAU,GAAG,EAAE,CAAC;AACtC,gBAAgB,MAAM,mBAAmB,GAAG,0BAA0B,CAAC,yBAAyB,EAAE,UAAU,CAAC,CAAC;AAC9G,gBAAgB,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,aAAa,CAAC,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,mBAAmB,CAAC,CAAC;AAC/G,gBAAgB,aAAa,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;AAC9C,gBAAgB,MAAM,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACtD,gBAAgB,MAAM,KAAK,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,EAAE,UAAU,CAAC,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;AAClF,gBAAgB,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACtC,aAAa;AACb,iBAAiB,IAAI,iBAAiB,CAAC,OAAO,CAAC,EAAE;AACjD,gBAAgB,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC;AAC1D,gBAAgB,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,kBAAkB,EAAE,wBAAwB,EAAE,2BAA2B,GAAG,GAAG,yBAAyB,CAAC,OAAO,EAAE,QAAQ,EAAE,qBAAqB,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;AACvN,gBAAgB,MAAM,CAAC,MAAM,CAAC,eAAe,EAAE,wBAAwB,CAAC,CAAC;AACzE,gBAAgB,aAAa,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;AAC9C,gBAAgB,IAAI,kBAAkB,EAAE;AACxC,oBAAoB,WAAW,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;AACzD,iBAAiB;AACjB,gBAAgB,IAAI,2BAA2B,EAAE;AACjD,oBAAoB,6BAA6B,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;AACpF,iBAAiB;AACjB,gBAAgB,QAAQ,MAAM;AAC9B,oBAAoB,KAAK,OAAO;AAChC,wBAAwB,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACrD,wBAAwB,MAAM;AAC9B,oBAAoB,KAAK,UAAU;AACnC,wBAAwB,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AACvD,wBAAwB,MAAM;AAC9B,oBAAoB,KAAK,cAAc;AACvC,wBAAwB,mBAAmB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC3D,wBAAwB,MAAM;AAG9B,iBAAiB;AACjB,aAAa;AACb,SAAS;AACT,aAAa,IAAI,YAAY,EAAE;AAC/B,YAAY,MAAM,MAAM,GAAG,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC;AACtD,YAAY,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC;AACvD,YAAY,MAAM,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC;AAC9C,YAAY,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,aAAa,CAAC,qBAAqB,CAAC,CAAC;AACpF,YAAY,IAAI,UAAU,IAAI,EAAE,EAAE;AAClC,gBAAgB,MAAM,IAAI,KAAK,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,0GAA0G,CAAC,CAAC,CAAC;AACjK,aAAa;AACb,YAAY,MAAM,mBAAmB,GAAG,0BAA0B,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AACvF,YAAY,oBAAoB,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AACrD,YAAY,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,aAAa,CAAC,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,mBAAmB,EAAE,UAAU,EAAE,YAAY,CAAC,CAAC;AACrI,YAAY,aAAa,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;AAC1C,YAAY,MAAM,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM,KAAK,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,0BAA0B,EAAE,UAAU,CAAC,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;AACvG,YAAY,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAClC,SAAS;AACT,aAAa;AACb,YAAY,MAAM,MAAM,GAAG,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC;AAC/C,YAAY,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC;AACvD,YAAY,MAAM,CAAC,YAAY,CAAC,GAAG,UAAU,CAAC;AAC9C,YAAY,MAAM,2BAA2B,GAAG,mCAAmC,CAAC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;AACnH,YAAY,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,aAAa,CAAC,qBAAqB,CAAC,CAAC;AACpF,YAAY,IAAI,UAAU,IAAI,EAAE,EAAE;AAClC,gBAAgB,MAAM,IAAI,KAAK,CAAC,CAAC,QAAQ,EAAE,QAAQ,CAAC,0GAA0G,CAAC,CAAC,CAAC;AACjK,aAAa;AACb,YAAY,MAAM,mBAAmB,GAAG,0BAA0B,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AACvF,YAAY,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,aAAa,CAAC,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,mBAAmB,EAAE,UAAU,EAAE,YAAY,EAAE,2BAA2B,CAAC,CAAC;AAClK,YAAY,aAAa,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;AAC1C,YAAY,MAAM,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAClD,YAAY,MAAM,KAAK,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,QAAQ,EAAE,UAAU,CAAC,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;AACrF,YAAY,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAClC,SAAS;AACT,KAAK;AACL,IAAI,MAAM,gBAAgB,GAAG;AAC7B,QAAQ,OAAO,EAAE,aAAa;AAC9B,QAAQ,SAAS,EAAE,eAAe;AAClC,QAAQ,aAAa,EAAE,mBAAmB;AAC1C,KAAK,CAAC;AACN,IAAI,SAAS,CAAC,IAAI,CAAC,GAAG,4BAA4B,CAAC,gBAAgB,CAAC,CAAC,CAAC;AACtE,IAAI,MAAM,eAAe,GAAG,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AACnD,IAAI,OAAO;AACX,QAAQ,MAAM,EAAE,eAAe;AAC/B,QAAQ,WAAW;AACnB,QAAQ,oBAAoB;AAC5B,QAAQ,eAAe;AACvB,QAAQ,6BAA6B;AACrC,KAAK,CAAC;AACN,CAAC,CAAC;AACF,SAAS,wBAAwB,CAAC,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,EAAE;AAC5E,IAAI,MAAM,EAAE,WAAW,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAE,kBAAkB,GAAG,GAAG,OAAO,CAAC,IAAI,CAAC;AAC1F;AACA,IAAI,MAAM,iBAAiB,GAAG,WAAW,KAAK,IAAI,IAAI,QAAQ,EAAE,MAAM,CAAC;AACvE,IAAI,MAAM,cAAc,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;AAChD,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,iBAAiB;AAC7C,SAAS,iBAAiB,IAAI,CAAC,cAAc,CAAC,EAAE;AAChD;AACA;AACA;AACA;AACA,QAAQ,MAAM,IAAI,KAAK,CAAC,CAAC,iBAAiB,EAAE,QAAQ,CAAC,4DAA4D,CAAC,CAAC,CAAC;AACpH,KAAK;AACL;AACA,IAAI,IAAI,QAAQ,EAAE,MAAM,EAAE;AAC1B,QAAQ,MAAM,kBAAkB,GAAG,IAAI,GAAG,EAAE,CAAC;AAC7C,QAAQ,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE;AACxC,YAAY,kBAAkB,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC;AAClE,SAAS;AACT,QAAQ,IAAI,kBAAkB,CAAC,IAAI,GAAG,CAAC,EAAE;AACzC,YAAY,MAAM,qBAAqB,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC;AACzF,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,yCAAyC,EAAE,QAAQ,CAAC,0BAA0B,EAAE,qBAAqB,CAAC,CAAC,CAAC,CAAC;AACtI,SAAS;AACT,KAAK;AACL,IAAI,IAAI,MAAM,KAAK,cAAc,EAAE;AACnC,QAAQ,IAAI,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;AAC3C,YAAY,MAAM,IAAI,KAAK,CAAC,CAAC,EAAE,QAAQ,CAAC,2IAA2I,CAAC,CAAC,CAAC;AACtL,SAAS;AACT,QAAQ,IAAI,kBAAkB,CAAC;AAC/B,QAAQ,KAAK,MAAM,MAAM,IAAI,kBAAkB,EAAE;AACjD,YAAY,MAAM,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC;AAChD,YAAY,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,UAAU,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;AACnE,YAAY,IAAI,IAAI,KAAK,OAAO,IAAI,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;AAC/E,gBAAgB,MAAM,IAAI,KAAK,CAAC,CAAC,0FAA0F,EAAE,QAAQ,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC;AAChK,aAAa;AACb,YAAY,IAAI,kBAAkB,CAAC;AACnC,YAAY,IAAI,IAAI,KAAK,OAAO,EAAE;AAClC,gBAAgB,IAAI,MAAM,CAAC,IAAI,CAAC,kBAAkB,CAAC,MAAM,KAAK,CAAC,EAAE;AACjE,oBAAoB,MAAM,IAAI,KAAK,CAAC,CAAC,0GAA0G,EAAE,QAAQ,CAAC,gBAAgB,EAAE,UAAU,CAAC,8BAA8B,CAAC,CAAC,CAAC;AACxN,iBAAiB;AACjB,qBAAqB;AACrB,oBAAoB,kBAAkB,GAAG,GAAG,CAAC;AAC7C,iBAAiB;AACjB,aAAa;AACb,YAAY,IAAI,IAAI,KAAK,iBAAiB,EAAE;AAC5C,gBAAgB,IAAI,GAAG,CAAC,IAAI,CAAC,QAAQ,KAAK,UAAU,EAAE;AACtD,oBAAoB,MAAM,IAAI,KAAK,CAAC,CAAC,uEAAuE,EAAE,QAAQ,CAAC,gBAAgB,EAAE,UAAU,CAAC,YAAY,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AACvL,iBAAiB;AACjB,qBAAqB;AACrB,oBAAoB,MAAM,UAAU,GAAG,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC;AAC3D,oBAAoB,IAAI,UAAU,CAAC,UAAU,CAAC,EAAE;AAChD,wBAAwB,CAAC,EAAE,GAAG,EAAE,kBAAkB,EAAE,GAAG,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAE;AACnG,qBAAqB;AACrB,yBAAyB;AACzB,wBAAwB,kBAAkB,GAAG,UAAU,CAAC;AACxD,qBAAqB;AACrB,iBAAiB;AACjB,aAAa;AACb,YAAY,kBAAkB,GAAG,kBAAkB,IAAI,kBAAkB,CAAC;AAC1E;AACA;AACA,YAAY,IAAI,kBAAkB,KAAK,kBAAkB,EAAE;AAC3D,gBAAgB,MAAM,IAAI,KAAK,CAAC,CAAC,qGAAqG,EAAE,QAAQ,CAAC,2DAA2D,CAAC,CAAC,CAAC;AAC/M,aAAa;AACb,SAAS;AACT,KAAK;AACL,CAAC;AACD,MAAM,qBAAqB,GAAG,CAAC,OAAO,KAAK;AAC3C,IAAI,OAAO,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,cAAc,CAAC;AACzF,CAAC,CAAC;AACF,MAAM,eAAe,GAAG,CAAC,OAAO,KAAK;AACrC,IAAI,OAAO,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,eAAe,CAAC;AAC1F,CAAC,CAAC;AACF,MAAM,iBAAiB,GAAG,CAAC,OAAO,KAAK;AACvC,IAAI,OAAO,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,iBAAiB,CAAC;AAC5F,CAAC,CAAC;AACF,MAAM,uBAAuB,GAAG,CAAC,UAAU,KAAK;AAChD;AACA,IAAI,MAAM,kBAAkB,GAAG,SAAS,CAAC;AACzC,IAAI,IAAI,UAAU,KAAK,SAAS,EAAE;AAClC,QAAQ,OAAO,kBAAkB,CAAC;AAClC,KAAK;AACL,IAAI,IAAI,eAAe,CAAC,UAAU,CAAC,EAAE;AACrC,QAAQ,OAAO,CAAC,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC9C,KAAK;AACL,IAAI,OAAO,UAAU,CAAC;AACtB,CAAC,CAAC;AACF,MAAM,kBAAkB,GAAG,CAAC,UAAU,KAAK;AAC3C;AACA,IAAI,MAAM,oBAAoB,GAAG,UAAU,CAAC,OAAO,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;AAC9E,IAAI,QAAQ,oBAAoB;AAChC,SAAS,KAAK,CAAC,IAAI,CAAC;AACpB,SAAS,GAAG,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC;AACnC;AACA,SAAS,MAAM,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;AACxD,CAAC,CAAC;AACF;AACA;AACA,MAAM,gBAAgB,GAAG,CAAC,IAAI,EAAE,YAAY,KAAK;AACjD,IAAI,IAAI,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AACrC,QAAQ,OAAO,IAAI,CAAC,KAAK,CAAC;AAC1B,KAAK;AACL,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;AACrB,QAAQ,MAAM,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC;AACtC,KAAK;AACL,IAAI,MAAM,eAAe,GAAG,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC3D,IAAI,IAAI,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE;AACpC,QAAQ,MAAM,IAAI,KAAK,CAAC,YAAY,CAAC,CAAC;AACtC,KAAK;AACL,IAAI,MAAM,oBAAoB,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;AACpD;AACA,IAAI,OAAO,EAAE,YAAY,EAAE,IAAI,CAAC,KAAK,EAAE,UAAU,EAAE,oBAAoB,EAAE,CAAC;AAC1E,CAAC,CAAC;AACF,MAAM,YAAY,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAE,QAAQ,KAAK;AACrD,IAAI,MAAM,mBAAmB,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,KAAK;AAC1D,QAAQ,MAAM,WAAW,GAAG,IAAI,SAAS,CAAC,cAAc,EAAE,OAAO,CAAC,CAAC;AACnE,QAAQ,OAAO;AACf,YAAY,UAAU,EAAE,uBAAuB,CAAC,WAAW,CAAC,UAAU,CAAC;AACvE,YAAY,KAAK,EAAE,gBAAgB,CAAC,WAAW,EAAE,8HAA8H,CAAC;AAChL,SAAS,CAAC;AACV,KAAK,CAAC,CAAC;AACP,IAAI,MAAM,IAAI,GAAG;AACjB,QAAQ,QAAQ,EAAE,MAAM;AACxB,QAAQ,SAAS,EAAE,QAAQ;AAC3B,QAAQ,QAAQ,EAAE,mBAAmB;AACrC,KAAK,CAAC;AACN,IAAI,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC;AACF,SAAS,yBAAyB,CAAC,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,YAAY,EAAE,UAAU,EAAE;AAC3F,IAAI,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC;AACxD,IAAI,IAAI,kBAAkB,GAAG,SAAS,CAAC;AACvC,IAAI,wBAAwB,CAAC,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,UAAU,CAAC,CAAC;AACvE,IAAI,IAAI,eAAe,CAAC,QAAQ,CAAC,EAAE;AACnC,QAAQ,kBAAkB,GAAG,YAAY,CAAC,QAAQ,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;AACtE,KAAK;AACL,IAAI,MAAM,QAAQ,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;AACjD,IAAI,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,wBAAwB,EAAE,2BAA2B,GAAG,GAAG,oBAAoB,CAAC,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;AAChL,IAAI,OAAO;AACX,QAAQ,QAAQ;AAChB,QAAQ,MAAM;AACd,QAAQ,kBAAkB;AAC1B,QAAQ,wBAAwB;AAChC,QAAQ,2BAA2B;AACnC,KAAK,CAAC;AACN,CAAC;AACD,SAAS,4BAA4B,CAAC,EAAE,OAAO,EAAE,SAAS,EAAE,aAAa,GAAG,EAAE;AAC9E,IAAI,MAAM,KAAK,GAAG,EAAE,CAAC;AACrB,IAAI,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;AAC9B,QAAQ,KAAK,CAAC,IAAI,CAAC,CAAC,mBAAmB,EAAE,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AACtE,KAAK;AACL,IAAI,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;AAC5B,QAAQ,KAAK,CAAC,IAAI,CAAC,CAAC,gBAAgB,EAAE,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AACjE,KAAK;AACL,IAAI,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;AAClC,QAAQ,KAAK,CAAC,IAAI,CAAC,CAAC,uBAAuB,EAAE,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;AAC9E,KAAK;AACL,IAAI,OAAO,KAAK,CAAC;AACjB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,SAAS,aAAa,CAAC,GAAG,EAAE;AAC5B,IAAI,MAAM,EAAE,MAAM,EAAE,WAAW,EAAE,oBAAoB,EAAE,eAAe,EAAE,6BAA6B,GAAG,GAAG,kBAAkB,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AAC1I,IAAI,OAAO;AACX,QAAQ,MAAM;AACd,QAAQ,aAAa,EAAE,EAAE;AACzB,QAAQ,WAAW;AACnB,QAAQ,oBAAoB;AAC5B,QAAQ,eAAe;AACvB,QAAQ,6BAA6B;AACrC,KAAK,CAAC;AACN,CAAC;AACD,OAAO,CAAC,aAAa,GAAG,aAAa;;"}